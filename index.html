<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Chaos Carver — 3D Carving Game</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:#1a1a1a; overflow:hidden; font-family:'Courier New',monospace; touch-action:none; }
    #scene { perspective:1000px; width:100vw; height:100vh; display:flex; justify-content:center; align-items:center; }
    #block-container { transform-style:preserve-3d; width:200px; height:200px; position:relative; }
    .face { position:absolute; width:200px; height:200px; background:#D4A574; border:3px solid #8B5A2B; box-shadow:inset 0 0 20px rgba(0,0,0,0.3); }
    .face.front  { transform:translateZ(100px); }
    .face.back   { transform:rotateY(180deg) translateZ(100px); }
    .face.right  { transform:rotateY(90deg) translateZ(100px); }
    .face.left   { transform:rotateY(-90deg) translateZ(100px); }
    .face.top    { transform:rotateX(90deg) translateZ(100px); }
    .face.bottom { transform:rotateX(-90deg) translateZ(100px); }

    /* OUTLINES */
    .outline { position:absolute; border:3px dashed #00f; pointer-events:none; }
    .front .outline  { width:140px; height:120px; top:40px; left:30px; clip-path:polygon(30% 0%, 70% 0%, 85% 30%, 75% 60%, 60% 100%, 40% 100%, 25% 60%, 15% 30%); }
    .top .outline    { width:140px; height:140px; top:30px; left:30px; clip-path:ellipse(50% 40% at 50% 50%); }
    .side .outline   { width:120px; height:160px; top:20px; left:40px; clip-path:polygon(40% 0%, 60% 0%, 80% 40%, 70% 80%, 50% 100%, 30% 80%, 20% 40%); }

    /* HANDS & CHISEL */
    #hands { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); pointer-events:none; z-index:10; }
    .hand { width:60px; height:100px; background:#F4C2A1; border-radius:30px 30px 10px 10px; position:absolute; bottom:0; }
    .hand.left { left:-50px; transform:rotate(-20deg); }
    .hand.right { left:10px; transform:rotate(20deg); }
    .chisel { width:8px; height:80px; background:linear-gradient(#ccc, #aaa); position:absolute; bottom:80px; left:50%; transform:translateX(-50%) rotate(45deg); border-radius:4px 4px 0 0; box-shadow:0 0 10px rgba(0,0,0,0.5); }
    .chisel::after { content:''; width:20px; height:20px; background:#666; position:absolute; bottom:-10px; left:-6px; border-radius:50%; }

    /* PARTICLES */
    .particle { position:absolute; width:6px; height:6px; background:#D4A574; border-radius:50%; pointer-events:none; animation:fall 1s linear forwards; }
    @keyframes fall { to { transform:translateY(300px) rotate(720deg); opacity:0; } }

    #ui { position:absolute; top:20px; left:20px; color:#fff; font-size:14px; }
    #rotate-hint { position:absolute; bottom:20px; width:100%; text-align:center; color:#aaa; font-size:12px; }
  </style>
</head>
<body>
  <div id="scene">
    <div id="block-container">
      <div class="face front"><div class="outline"></div></div>
      <div class="face back"><div class="outline side"></div></div>
      <div class="face right"><div class="outline side"></div></div>
      <div class="face left"><div class="outline side"></div></div>
      <div class="face top"><div class="outline"></div></div>
      <div class="face bottom"><div class="outline"></div></div>
    </div>
    <div id="hands">
      <div class="hand left"></div>
      <div class="hand right"></div>
      <div class="chisel"></div>
    </div>
  </div>
  <div id="ui">Drag to rotate • Tap & drag to carve</div>
  <div id="rotate-hint">Hold & drag to spin block</div>

  <script>
    const container = document.getElementById('block-container');
    const chisel = document.querySelector('.chisel');
    const hands = document.getElementById('hands');
    let isCarving = false;
    let rotX = -25, rotY = 30;

    // ROTATE BLOCK
    let isDragging = false, startX, startY;
    document.addEventListener('mousedown', e => { isDragging = true; startX = e.clientX; startY = e.clientY; });
    document.addEventListener('mousemove', e => {
      if (!isDragging) return;
      rotY += (e.clientX - startX) * 0.5;
      rotX -= (e.clientY - startY) * 0.5;
      container.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      startX = e.clientX; startY = e.clientY;
    });
    document.addEventListener('mouseup', () => isDragging = false);

    // TOUCH SUPPORT
    document.addEventListener('touchstart', e => {
      isDragging = true;
      startX = e.touches[0].clientX;
      startY = e.touches[0].clientY;
      e.preventDefault();
    }, {passive:false});
    document.addEventListener('touchmove', e => {
      if (!isDragging) return;
      rotY += (e.touches[0].clientX - startX) * 0.5;
      rotX -= (e.touches[0].clientY - startY) * 0.5;
      container.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      startX = e.touches[0].clientX; startY = e.touches[0].clientY;
      e.preventDefault();
    }, {passive:false});
    document.addEventListener('touchend', () => isDragging = false);

    // CARVE ON TAP/DRAG
    document.addEventListener('pointerdown', e => {
      if (e.target.closest('#wheel')) return;
      isCarving = true;
      hands.style.opacity = '1';
      chisel.style.transform = 'translateX(-50%) rotate(60deg) scale(1.1)';
    });
    document.addEventListener('pointermove', e => {
      if (!isCarving) return;
      const rect = container.getBoundingClientRect();
      const x = e.clientX - rect.left - 100;
      const y = e.clientY - rect.top - 100;
      chisel.style.left = '50%';
      chisel.style.top = '60px';
      createParticle(e.clientX, e.clientY);
    });
    document.addEventListener('pointerup', () => {
      isCarving = false;
      hands.style.opacity = '0.7';
      chisel.style.transform = 'translateX(-50%) rotate(45deg) scale(1)';
    });

    function createParticle(x, y) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = x + 'px';
      p.style.top = y + 'px';
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 1000);
    }

    // INITIAL ROTATION
    container.style.transform = `rotateX(-25deg) rotateY(30deg)`;
    hands.style.opacity = '0.7';
  </script>
</body>
</html>
